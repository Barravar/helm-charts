# devops-janitor

![Version: 0.0.1](https://img.shields.io/badge/Version-0.0.1-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: ed184858](https://img.shields.io/badge/AppVersion-ed184858-informational?style=flat-square)

Helm chart for devops to cleanup shit

## Maintainers

| Name | Email | Url |
| ---- | ------ | --- |
| cloud-devops team |  |  |

## Requirements

Kubernetes: `>= 1.22`

## Values

| Key | Type | Default | Description |
|-----|------|---------|-------------|
| concurrencyPolicy | string | `"Forbid"` | Should we run more than one job at a time |
| externalSecrets | list | `[]` | ExternalSecrets are used to inject secrets from ASM into the containers |
| failedJobsHistoryLimit | int | `1` | How many failed jobs to keep |
| global.image | string | `"378905551400.dkr.ecr.us-east-1.amazonaws.com/cloud-devops/cloud-devops-janitor"` | Default image - can be overriden under jobs.scripts.image |
| global.meta | object | `{"businessUnits":"techops","costCenter":"","environment":"dev","owner":"cloud-devops","partOf":"cloud-devops/devops-janitor","slackChannel":"#cloud-devops","team":"cloud-devops","valueStream":"infra"}` | Tags to apply to the job |
| global.meta.businessUnits | string | `"techops"` | Business unit |
| global.meta.costCenter | string | `""` | Cost center |
| global.meta.environment | string | `"dev"` | Environment |
| global.meta.owner | string | `"cloud-devops"` | Team that owns this job |
| global.meta.partOf | string | `"cloud-devops/devops-janitor"` | Part of |
| global.meta.slackChannel | string | `"#cloud-devops"` | SlackChannel |
| global.meta.team | string | `"cloud-devops"` | Team name |
| global.meta.valueStream | string | `"infra"` | Value stream |
| global.pullPolicy | string | `"Always"` | Default pullPolicy - can be overriden under jobs.scripts.pullPolicy |
| global.serviceAccountName | string | `"cloud-devops-devops-janitor"` | ServiceAccount to use for the job |
| global.tag | string | `"ed184858"` | Default tag - can be overriden under jobs.scripts.tag / defaults to appVersion from Chart.yaml |
| job.annotations | string | `nil` | cronjob annotaitons |
| job.backoffLimit | int | `3` | How many times to retry the job if it fails |
| job.efsVolumes | string | `nil` | Efs volumes to mount inside the container |
| job.nodeSelector | object | `{}` | If specified the pods will be scheduled to only the node that matches the specified labes and values |
| job.persistentVolumeClaimMounts | string | `nil` | PersistentVolumeClaimMounts are used to mount a PVC to the container |
| job.pod.dnsConfig | object | `{"options":{"ndots":2}}` | Ndots patched to the container /etc/resolv.conf |
| job.pod.restartPolicy | string | `"Never"` | Should we restart the pod if it fails |
| job.scripts | object | `nil` | All the scripts that we want to run on this job. Each script will run in its own sidecar |
| job.secretMounts | string | `nil` | List of Secret mounts that should be added to the Deployment Each list item needs secretName and mountPath |
| job.tolerations | list | `[]` | If specified the pods will ignore specific taints on the nodes |
| job.vaultIntegration | object | `{"appRoleId":"","appRoleName":"","enable":false,"tokenPath":"/var/run/secrets/vault"}` | VaultIntegration is used to inject a Vault token into the containers |
| job.vaultIntegration.appRoleId | string | `""` | Both appRoleName and appRoleId are defined by the pipeline, so you don't need to provide values for them. |
| job.vaultIntegration.appRoleName | string | `""` | Both appRoleName and appRoleId are defined by the pipeline, so you don't need to provide values for them. |
| job.vaultIntegration.enable | bool | `false` | Enable or disable the vault integration |
| job.vaultIntegration.tokenPath | string | `"/var/run/secrets/vault"` | Default tokenPath |
| multiarch | object | `{"enabled":false}` | Is this a multiarch job |
| schedule | string | `"@monthly"` | How often the job should be run - takes normal cron syntax |
| serviceAccount.annotations | object | `{}` | Annotations to add to our serviceAccount |
| successfulJobsHistoryLimit | int | `3` | How many successful jobs to keep |

----------------------------------------------
Autogenerated from chart metadata using [helm-docs v1.11.0](https://github.com/norwoodj/helm-docs/releases/v1.11.0)
